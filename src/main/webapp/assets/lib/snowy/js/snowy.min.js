String.prototype.format=function(a){var i=this;if(0<arguments.length)if(1==arguments.length&&"object"==typeof a){for(var t in a)if(null!=a[t]){var n=new RegExp("({"+t+"})","g");i=i.replace(n,a[t])}}else for(var e=0;e<arguments.length;e++)if(null!=arguments[e]){n=new RegExp("({)"+e+"(})","g");i=i.replace(n,arguments[e])}return i},String.format=function(){if(0==arguments.length)return null;for(var a=arguments[0],i=1;i<arguments.length;i++){var t=new RegExp("\\{"+(i-1)+"\\}","gm");a=a.replace(t,arguments[i])}return a},window.console=window.console||function(){var a={};return a.log=a.warn=a.debug=a.info=a.error=a.time=a.dir=a.profile=a.clear=a.exception=a.trace=a.assert=function(){},a}();var __IsEmpty=function(a){return void 0===a||(null===a||(""===a||0===a.length))},__IsTrue=function(a){return!__IsEmpty(a)&&!0===a},__IsFalse=function(a){return!!__IsEmpty(a)||!1===a},__randomString=function(a){a=a||32;for(var i="_ABCD_EFGH_IJKLMN_OPQRSTUVWX_YZabcdefgh_ijklmnopqrstu_vwxyz01234_56789",t=i.length,n="",e=0;e<a;e++)n+=i.charAt(Math.floor(Math.random()*t));return n},xMode={primary:"primary",success:"success",info:"info",warning:"warning",danger:"danger"},xDisplay={block:"block",none:"none"},FormGroup=function(a){this.id=a};$.extend(FormGroup.prototype,{init:function(){return this}});var Modal=function(a){this.id=a};$.extend(Modal.prototype,{init:function(){return this}});var Panel=function(a){this.id={panel_id:a,heading_id:a+"_panel_heading",body_id:a+"_panel_body",footer_id:a+"_panel_footer"},this.class={xMode:"panel-default",display:{panel:"block",heading:"block",body:"block",footer:"block"}}};$.extend(Panel.prototype,{init:function(){var a=this;return a.create(a),a},setContextual:function(a){return this.class.xMode="panel-"+a,this},setHeading:function(a){var i=this;return $("#"+i.id.panel_id+" #"+i.id.heading_id).html(a),i},setBody:function(a){var i=this;return $("#"+i.id.panel_id+" #"+i.id.body_id).html(a),i},setFooter:function(a){var i=this;return $("#"+i.id.panel_id+" #"+i.id.footer_id).html(a),i},__setHide:function(a,i,t){__IsTrue(t)?(xDisplay.none,$(a).removeClass(xDisplay.block),$(a).addClass(xDisplay.none)):(xDisplay.block,$(a).removeClass(xDisplay.none),$(a).addClass(xDisplay.block))},hidePanel:function(){var a=this;a.__setHide("#"+a.id.panel_id,a.class.display.panel,!0)},hideHeading:function(){var a=this;a.__setHide("#"+a.id.panel_id+" #"+a.id.heading_id,a.class.display.panel,!0)},hideBody:function(){var a=this;a.__setHide("#"+a.id.panel_id+" #"+a.id.body_id,a.class.display.panel,!0)},hideFooter:function(){var a=this;a.__setHide("#"+a.id.panel_id+" #"+a.id.footer_id,a.class.display.panel,!0)},showPanel:function(){var a=this;a.__setHide("#"+a.id.panel_id,a.class.display.panel,!1)},showHeading:function(){var a=this;a.__setHide("#"+a.id.panel_id+" #"+a.id.heading_id,a.class.display.panel,!1)},showBody:function(){var a=this;a.__setHide("#"+a.id.panel_id+" #"+a.id.body_id,a.class.display.panel,!1)},showFooter:function(){var a=this;a.__setHide("#"+a.id.panel_id+" #"+a.id.footer_id,a.class.display.panel,!1)},create:function(a){var i=[];i.push(String.format("<div class='panel {0} {1}' id='{2}'>",a.class.xMode,a.class.display.heading,a.id.panel_id)),i.push(String.format("  <div class='panel-heading {0}' id='{1}'>",a.class.display.heading,a.id.heading_id)),i.push(String.format("  </div>")),i.push(String.format("  <div class='panel-body {0}' id='{1}'>",a.class.display.body,a.id.body_id)),i.push(String.format("  </div>")),i.push(String.format("   <div class='panel-footer {0}' id='{1}'>",a.class.display.footer,a.id.footer_id)),i.push(String.format("   </div>")),i.push(String.format("</div>")),$("#"+a.id.panel_id).html(i.join(""))}});var DataTable=function(a){this.id=a,this.component_id={btn_ctn_id:__randomString(32),search_ctn_id:__randomString(32),table_ctn_id:__randomString(32),pagination_ctn_id:__randomString(32),pagination:{pageSelect_id:__randomString(32),refresh_id:__randomString(32),pageSizeSelect_id:__randomString(32),totalItems_id:__randomString(32),gotoPage_id:__randomString(32)}},this.dataTablePara,this.dataTablePage={totalRow:0,pageNumber:1,totalPage:0,pageSize:10}};$.extend(DataTable.prototype,{init:function(a){var i=this;return i.dataTablePara=a,i.initHtmlFrame(),i.initTableBodyFrame(),i.initPaginationBodyFrame(),i.__loadData(),i.__fillTableThead(),i.__fillTableBody(),i.__fillTablePagination(),this},initHtmlFrame:function(){var a=this,i=[];i.push("<div>"),i.push(String.format("<div class='col-sm-9' style='padding-left:0' id='{0}'></div>",a.component_id.btn_ctn_id)),i.push(String.format("<div class='col-sm-3' style='padding-left:0' id='{0}'></div>",a.component_id.search_ctn_id)),i.push(String.format("<div class='col-xs-12' style='padding-left:0;overflow-x: scroll;' id='{0}'> </div>",a.component_id.table_ctn_id)),i.push(String.format("<div class='col-xs-12' style='padding-left:0' id='{0}'> </div>",a.component_id.pagination_ctn_id)),i.push("</div>"),$("#"+a.id).html(i.join(""))},initTableBodyFrame:function(){var a=this,i=[];i.push(String.format("<table class='table table-striped table-bordered table-hover table-condensed' id='{0}'>",a.component_id.table_ctn_id)),i.push(String.format("    <thead><tr></tr></thead>")),i.push(String.format("<tbody></tbody>")),i.push(String.format("</table>")),$("#"+a.id+" #"+a.component_id.table_ctn_id).html(i.join(""))},__getTableCols:function(a){var i=this;if(!__IsEmpty(i.dataTablePara)){var t=i.dataTablePara.tableCols;if(__IsEmpty(t))i.dataTablePara.tableCols=void 0;else{var n=t[a];if(!__IsEmpty(t))return n;i.dataTablePara.tableCols[a]=void 0}}},__getTableConfig:function(a){if(!__IsEmpty(this.dataTablePara)){var i=this.dataTablePara.tableConfig;if(__IsEmpty(i))this.dataTablePara.tableConfig=void 0;else{var t=i[a];if(!__IsEmpty(t))return t;this.dataTablePara.tableConfig[a]=void 0}}},__isMultiSelect:function(){return __IsTrue(this.__getTableConfig("multiSelect"))},__isShowSelect:function(){return __IsTrue(this.__getTableConfig("showSelect"))},__fillTableThead:function(){var a=this.__getTableCols("theadCols");if(!__IsEmpty(a)){var i=[],t=__IsTrue(this.__isShowSelect())?"":"none";i.push(String.format("<th  class='{0}' style='width:30px'></th>",t));for(var n=0;n<a.length;n++){var e=a[n],o=__IsEmpty(e.title)?e.id:e.title,l=__IsEmpty(e.style)?"":e.style,s=__IsTrue(e.visible)?"":"none";i.push(String.format("<th class='{0}' style='{1}'>{2}</th>",s,l,o))}$("#"+this.id+" #"+this.component_id.table_ctn_id+" thead > tr ").html(i.join(""))}},__loadData:function(){var i=this,t=i.__getTableCols("tbodyCols");if(!__IsEmpty(t)&&"url"===t.mode){var a=t.url;$.ajax({type:"post",url:a,data:i.dataTablePage,cache:!1,async:!1,success:function(a){t.data=a,i.dataTablePage.totalRow=a.totalRow,i.dataTablePage.pageNumber=a.pageNumber,i.dataTablePage.totalPage=a.totalPage,i.dataTablePage.pageSize=a.pageSize}})}},__fillTableBody:function(){var a=this,i=[],t=a.__getTableCols("tbodyCols"),n=a.__getTableCols("theadCols");if(!(__IsEmpty(t)||__IsEmpty(n)||__IsEmpty(t.data)||__IsEmpty(t.data.rows))){for(var e=t.data.rows,o=__IsTrue(a.__isShowSelect())?"":"none",l=__IsTrue(a.__isMultiSelect())?"checkbox":"radio",s=0;s<e.length;s++){var r=e[s],d=__randomString(8),_=__randomString(32);r.randomKey=d,r[d]=_,i.push(String.format("<tr {0}='{1}'>",d,_)),i.push(String.format("<td  class='{0}' style='width:30px'><input type='{1}'></td>",o,l));for(var p=0;p<n.length;p++){var c=n[p],h=r[c.id],g=c.formatFunc,u=__IsEmpty(c.style)?"":c.style,f=__IsTrue(c.visible)?"":"none";h=__IsEmpty(g)?h:g(r),i.push(String.format("<td  class='{0}' style='{1}'>{2}</td>",f,u,h))}i.push("</tr>")}$("#"+a.id+" #"+a.component_id.table_ctn_id+" tbody ").html(i.join(""))}},__getPageSize:function(){var a="#"+this.id+" #"+this.component_id.pagination_ctn_id+" #"+this.component_id.pagination.pageSizeSelect_id;return $(a+" select").find("option:selected").text()},____reloadStart:function(a){var i="#"+a.id+" #"+a.component_id.pagination_ctn_id+" #"+a.component_id.pagination.refresh_id;$(i+"  span").removeClass("glyphicon glyphicon-refresh "),$(i+"  img").removeClass("none")},____reloadStop:function(a){var i="#"+a.id+" #"+a.component_id.pagination_ctn_id+" #"+a.component_id.pagination.refresh_id;$(i+"  span").addClass("glyphicon glyphicon-refresh"),$(i+"  img").addClass("none")},__reloadDataTable:function(a,i){var t=this;t.dataTablePage.pageSize=a,t.dataTablePage.pageNumber=i,t.__loadData(),t.__fillTablePagination(),t.____reloadStart(t),setTimeout(function(){t.__fillTableThead(),t.__fillTableBody(),t.____reloadStop(t)},100)},___pageNumBindClick:function(t,a){$(a).children("li").each(function(){$(this).children("a").each(function(){$(this).click(function(){var a=$(this).parent().attr("page"),i=t.__getPageSize();t.__reloadDataTable(i,a)})})})},____fillTablePagination__pageSelect:function(){var a=this,i=[],t=a.__getTableCols("tbodyCols");if(!__IsEmpty(t)&&!__IsEmpty(t.data)){var n=t.data.totalPage,e=t.data.pageNumber,o=4<=e?e-3+1:1,l=5+(o=o+5<=n?o:n-5+1)<=n?5+o-1:n,s=1===e?"disabled":"",r=e===n?"disabled":"",d=1===e?"1":e-1,_=e===n?n:e+1;i.push(String.format("<li class='{0}' page='{1}'><a >&lt;&lt;</a></li>",s,"1")),i.push(String.format("<li class='{0}' page='{1}'><a > &lt; </a></li>",s,d));for(var p=o;p<=l;p++){var c=e===p?"active":"";i.push(String.format("<li class='{0}' page='{1}'><a >{2}</a></li>",c,p,p))}i.push(String.format("<li class='{0}' page='{1}'><a > &gt; </a></li>",r,_)),i.push(String.format("<li class='{0}' page='{1}'><a >&gt;&gt;</a></li>",r,n));var h="#"+a.id+" #"+a.component_id.pagination_ctn_id+" #"+a.component_id.pagination.pageSelect_id;$(h).html(i.join("")),a.___pageNumBindClick(a,h)}},___pageNumBindClick:function(t,a){$(a).children("li").each(function(){$(this).children("a").each(function(){$(this).click(function(){var a=$(this).parent().attr("page"),i=t.__getPageSize();t.__reloadDataTable(i,a)})})})},____fillTablePagination__refresh:function(){var a=this,i=[],t=a.__getTableCols("tbodyCols");if(!__IsEmpty(t)&&!__IsEmpty(t.data)){var n=t.data.pageNumber,e=String.format("<li page='{0}'><a><span class='glyphicon glyphicon-refresh' style='top: 0'><img src='/assets/images/loading/5-121204193949.gif' class='none'></span></a></li>",n);i.push(e);var o="#"+a.id+" #"+a.component_id.pagination_ctn_id+" #"+a.component_id.pagination.refresh_id;$(o).html(i.join("")),a.___pageNumBindClick(a,o)}},____fillTablePagination__pageSizeSelect:function(){var i=this,a=[];a.push("<li><span class='glyphicon glyphicon-list' style='top: 0'></span></li><li><span style='padding: 0;border: 0;'>  <select class='form-control' >    <option>10</option>    <option>20</option>    <option>30</option>    <option>40</option>    <option>50</option>  </select></span></li>");var t="#"+i.id+" #"+i.component_id.pagination_ctn_id+" #"+i.component_id.pagination.pageSizeSelect_id;$(t).html(a.join(""));var n=i.__getTableCols("tbodyCols");if(!__IsEmpty(n)&&!__IsEmpty(n.data)){var e=n.data.pageSize;$(t+" select").val(e),$(t+" select").change(function(){var a=$(this).val();i.__reloadDataTable(a,1)})}},____fillTablePagination__totalItems:function(){var a=[],i=this.__getTableCols("tbodyCols");if(!__IsEmpty(i)&&!__IsEmpty(i.data)){var t=i.data.totalRow,n=i.data.totalPage,e=String.format("<li><span>\u5171{0} \u6761</span></li><li><span>\u5171 {1} \u9875</span></li>",t,n);a.push(e),$("#"+this.id+" #"+this.component_id.pagination_ctn_id+" #"+this.component_id.pagination.totalItems_id).html(a.join(""))}},____fillTablePagination__gotoPage:function(){var n=this,a=[];a.push("<li><span style='padding:6px 3px' >\u5230</span></li><li><span><input type='text' class='form-control' value='1'></span></li><li><span style='padding:6px 3px' >\u9875</span></li>");var i="#"+n.id+" #"+n.component_id.pagination_ctn_id+" #"+n.component_id.pagination.gotoPage_id;$(i).html(a.join(""));var e=n.__getTableCols("tbodyCols");__IsEmpty(e)||__IsEmpty(e.data)||($(i+" input").val(e.data.pageNumber),$(i+" input").bind("keypress",function(a){if("13"==a.keyCode){var i=parseInt($(this).val());if(isNaN(i)||i+""!==$(this).val())return void $(this).val(e.data.pageNumber);i>e.data.totalPage&&(i=e.data.totalPage,$(this).val(i)),i<=0&&(i=1,$(this).val(i));var t=n.__getPageSize();n.__reloadDataTable(t,i)}}))},__fillTablePagination:function(){var a=this;a.____fillTablePagination__pageSelect(),a.____fillTablePagination__refresh(),a.____fillTablePagination__pageSizeSelect(),a.____fillTablePagination__totalItems(),a.____fillTablePagination__totalItems(),a.____fillTablePagination__gotoPage()},initPaginationBodyFrame:function(){var a=this,i=[];i.push(String.format("<ul class='pagination pageSelect' id='{0}'></ul>",a.component_id.pagination.pageSelect_id)),i.push(String.format("<ul class='pagination pageRefresh' id='{0}'></ul>",a.component_id.pagination.refresh_id)),i.push(String.format("<ul class='pagination pageSizeSelect' id='{0}'></ul>",a.component_id.pagination.pageSizeSelect_id)),i.push(String.format("<ul class='pagination pageTotalItems' id='{0}'></ul>",a.component_id.pagination.totalItems_id)),i.push(String.format("<ul class='pagination pageGotoPage' id='{0}'></ul>",a.component_id.pagination.gotoPage_id)),$("#"+a.id+" #"+a.component_id.pagination_ctn_id).html(i.join(""))}});var NavBar=function(a,i){this.id=a,this.nav_bar_header_id=this.id+"-header",this.nav_bar_menu_id=this.id+"-menu",this.nav_bar_footer_id=this.id+"-footer",this.url=i,this.invalid_id="__nav_bar_ignore_id__"};$.extend(NavBar.prototype,{init:function(){this.initHtmlFrame(this),this.initHtml(this)},initHtmlFrame:function(a){var i=[];i.push(String.format("<div id='{0}'></div>",a.nav_bar_header_id)),i.push(String.format("<div id='{0}'></div>",a.nav_bar_menu_id)),i.push(String.format("<div id='{0}'></div>",a.nav_bar_footer_id));var t=i.join("");$("#"+a.id).html(t)},initHtml:function(d){$.ajax({type:"POST",url:d.url,async:!1,cache:!1,dataType:"json",success:function(a){var i=[];if(!__IsEmpty(a)&&!__IsEmpty(a.subMenu)){i.push("<ul>");var t=a.subMenu;d.parents_id=[];for(var n=0;n<t.length;n++){var e=t[n];if(__IsEmpty(e.subMenu))i.push(String.format("<li id='{0}'><div><a href='{1}' class='hover'><span class='nav-bar-left-span {2}'></span> {3}</a></div></li>",e.id,e.url,e.iconClass,e.name));else{i.push(String.format("<li id='{0}'><div class='nav-bar-parent' class=''><span class='nav-bar-left-span {1}'></span> {2} <span class='nav-bar-right-span glyphicon glyphicon-chevron-down'></span></div><ul class='sub-nav-bar none'>",e.id,e.iconClass,e.name));for(var o=e.subMenu,l=0;l<o.length;l++){var s=o[l];i.push(String.format("<li id='{0}'><div><a href='{1}'>{2}</a></div></li>",s.id,s.url,s.name))}i.push("</ul></li>")}}i.push("</ul>");var r=i.join("");$("#"+d.nav_bar_menu_id).html(r),d._bindTabsClick(d)}}})},__clickNodeChange:function(a){a.children("div").each(function(){$(this).hasClass("nav-bar-current")?$(this).removeClass("nav-bar-current"):$(this).addClass("nav-bar-current"),$(this).children(".glyphicon").each(function(){$(this).hasClass("glyphicon-chevron-up")?($(this).removeClass("glyphicon-chevron-up"),$(this).addClass("glyphicon-chevron-down")):$(this).hasClass("glyphicon-chevron-down")&&($(this).removeClass("glyphicon-chevron-down"),$(this).addClass("glyphicon-chevron-up"))})}),a.children("ul").each(function(){$(this).hasClass("display")?$(this).slideUp(function(){$(this).removeClass("display"),$(this).addClass("none")}):$(this).slideDown(function(){$(this).removeClass("none"),$(this).addClass("display")})})},__brotherNodeChange:function(a){a.children("ul").each(function(){$(this).slideUp(function(){$(this).removeClass("display"),$(this).addClass("none")})}),a.children("div").each(function(){$(this).removeClass("nav-bar-current"),$(this).children(".glyphicon").each(function(){$(this).removeClass("glyphicon-chevron-down"),$(this).removeClass("glyphicon-chevron-up"),$(this).addClass("glyphicon-chevron-down")})})},_bindTabsClick:function(n){$("#"+n.nav_bar_menu_id+" ul").children("li").each(function(){$(this).click(function(){var i=this,t=$(i);t.parent("ul").children("li").each(function(){var a=$(this);i===this?n.__clickNodeChange(t):n.__brotherNodeChange(a)})})})},selectMenu:function(a,i,t){if(a.invalid_id===t){var n="#"+a.nav_bar_menu_id+" #"+i+" > div";$(n).addClass("nav-bar-current")}else{var e="#"+a.nav_bar_menu_id+" #"+t+" > div",o=(n="#"+a.nav_bar_menu_id+" #"+i+" > div","#"+a.nav_bar_menu_id+" #"+t+" > ul");$(e).addClass("nav-bar-current"),$(n).addClass("sub-nav-bar-current"),$(o).slideDown(function(){$(this).removeClass("none"),$(this).addClass("display")})}}});var Tree=function(a){this.id=a};$.extend(Tree.prototype,{init:function(){return this}});